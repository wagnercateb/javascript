<h1><a target=`_blank` href='https://ramdajs.com/docs/#innerJoin'>
    Ramda: a practical functional library for JavaScript programmers</a>
</h1>


<script src="http://cdnjs.cloudflare.com/ajax/libs/ramda/0.25.0/ramda.min.js"></script>

<p>Inner join: <span id="ij"></span></p>
<p>Group by: <span id="gb"></span></p>
<p>Reduce: <span id="r"></span></p>


<script>

    //inner join
    let ij = R.innerJoin(
        (record, numeros) => record.id === numeros,
        //array record:
        [
            {id: 824, name: 'Richie Furay'},
            {id: 956, name: 'Dewey Martin'},
            {id: 313, name: 'Bruce Palmer'},
            {id: 456, name: 'Stephen Stills'},
            {id: 177, name: 'Neil Young'}
        ],
        //array numeros:
        [177, 456, 999]
    );
    document.getElementById("ij").textContent = JSON.stringify(ij);
    //[{"id":456,"name":"Stephen Stills"},{"id":177,"name":"Neil Young"}]


    //group by
    //primeiro define a função que vai definir como será feito o agrupamento
    const byGrade = R.groupBy(function(student) {
            const score = student.score;
            return score < 65 ? 'F' :
                    score < 70 ? 'D' :
                    score < 80 ? 'C' :
                    score < 90 ? 'B' : 'A';
        }
    )
    //dados a serem agrupados
    const students = [  {name: 'Abby', score: 84},
                        {name: 'Eddy', score: 58},
                        {name: 'Outro F', score: 54},
                        {name: 'Jack', score: 69}
                    ]
    //aplica a função e exibe o resultado
    let gb = byGrade(students);
    //{"B":[{"name":"Abby","score":84}],"F":[{"name":"Eddy","score":58},{"name":"Outro F","score":54}],"D":[{"name":"Jack","score":69}]}
    document.getElementById("gb").textContent = JSON.stringify(gb);


    //reduce
    let r = R.reduce(R.subtract, 0, [1, 2, 3, 4]) // -1    => ((((0 - 1) - 2) - 3) - 4) = -10
    document.getElementById("r").textContent = JSON.stringify(r);


    //curry
    //Returns a curried equivalent of the provided function. Parece com uma CLOSURE FUNCTION
    //The curried function has two unusual capabilities:
    //  - its arguments needn't be provided one at a time
    //  - he special placeholder value R.__ may be used to specify "gaps", allowing partial application of any combination of arguments, regardless of their positions
    const addFourNumbers = (a, b, c, d) => a + b + c + d;
    const curriedAddFourNumbers = R.curry(addFourNumbers);
    const f = curriedAddFourNumbers(1, 2);
    const g = f(3);
    g(4); //=> 10


    //allPass
    //Takes a list of predicates and returns true if every one of the provided predicates is true
    //The function returned is a curried function
    const isQueen = R.propEq('rank', 'Q');
    const isSpade = R.propEq('suit', '♠︎');
    const isQueenOfSpades = R.allPass([isQueen, isSpade]);
    isQueenOfSpades({rank: 'Q', suit: '♣︎'}); //=> false
    isQueenOfSpades({rank: 'Q', suit: '♠︎'}); //=> true


    //countBy
    //Counts the elements of a list according to how many match each value of a key generated by the supplied function
    const numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];
    R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}
    const letters = ['a', 'b', 'A', 'a', 'B', 'c'];
    R.countBy(R.toLower)(letters);   //=> {'a': 3, 'b': 2, 'c': 1}


    //difference (tipo um NOT IN)
    //Finds the set (i.e. no duplicates) of all elements in the first list not contained in the second list
    //Objects and Arrays are compared in terms of value equality, not reference equality.
    R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]
    R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]
    R.difference([{a: 1}, {b: 2}], [{a: 1}, {c: 3}]) //=> [{b: 2}]

</script>

